<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      @import url("https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700&display=swap");
      :root {
        --background: white;
        --foreground_1: #c8c8c8;
        --color: black;
        --foreground_2: #d9d9d9;
        --accent: grey;
      }
      body {
        font-size: 2vw;
        font-family: "IBM Plex Mono";
        width: 100vw;
        height: 100vh;
        padding: 0px;
        margin: 0;
        overflow: hidden;
        background: var(--background);
        color: var(--color);
        display: flex;
        .sidebar {
          width: 30%;
          height: 100%;
          background-color: var(--foreground_1);
          .name {
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 10px;
            box-sizing: border-box;
            border-bottom: solid 1px var(--accent);
          }
          .status {
            padding-top:10px;
            display:flex;
            align-items: center;
            justify-content: space-evenly;
            border-bottom: solid 1px var(--accent);
            flex-wrap:wrap;
            .unit {
                width:50%;
                overflow:hidden;
                flex-direction: column;
                display:flex;
                align-items: center;
                justify-content: space-between;
                margin-bottom:1vh;
                .title { 
                    padding:0;
                    margin:0;
                    text-align: center;
                }
            }
            .line { 
                width:100%;
                display:flex;
                align-items: center;
                justify-content: space-between;
                padding:10px;
            }
          }
        }
        .rest {
          width: 20%;
          height: 100%;
        }
      }
      .roller {
        width: 12vw;
        height: 12vw;
        border-radius: 50%;
        position: relative;
        display: flex;
        align-items: center;
        justify-content: center;
        background: radial-gradient(
            closest-side,
            var(--background) 85%,
            transparent 80% 100%
          ),
          conic-gradient(var(--accent) var(--dial-percent), transparent 0);
      }
    </style>
  </head>
  <body>
    <div class="sidebar">
      <div class="name" id="server-name"></div>
      <div class="status">
        <div class="unit">
            <p class="title">TEMP (c)</p>
            <div class="roller" id="server-temperature">
                <div class="inner"></div>
            </div>
        </div>
        <div class="unit">
            <p class="title">CPU %</p>
            <div class="roller" id="server-cpu">
              <div class="inner"></div>
            </div>
        </div>
        <div class="unit">
            <p class="title">STORAGE</p>
            <div class="roller" id="server-storage">
                <div class="inner"></div>
            </div>
        </div>
        <div class="unit">
            <p class="title">RAM %</p>
            <div class="roller" id="server-ram">
                <div class="inner"></div>
            </div>
        </div>
        <div class="line">
            <div class="title">TITLE</div>
            <div class="value">00.0</div>
        </div>
      </div>
      <div class="database">
        <div class="inner"></div>
      </div>
    </div>
    <div class="rest"></div>
    <script>
      function getData(endpoint) {
        return fetch(`http://192.168.68.110/${endpoint}`)
          .then((res) => res.text())
          .catch((error) => {
            console.error(error);
          });
      }
      const temperatureEle = document.getElementById("server-temperature");
      const storageEle = document.getElementById("server-storage");
      const cpuEle = document.getElementById("server-cpu");
      const ramEle = document.getElementById("server-ram");
      const titleEle = document.getElementById("server-name");
      setInterval(() => {
        (async () => {
          let temp = await getData("temp");
          temperatureEle.style.cssText = `--dial-percent:${temp}%;`;
          temperatureEle.innerText = temp;
          temp = await getData("info_name");
          titleEle.innerText = temp;
          titleEle.title = await getData("info_ip");
          temp = await getData("cpu");
          cpuEle.style.cssText = `--dial-percent:${temp}%`;
          cpuEle.innerText = temp;
          temp = await getData("storage");
          storageEle.style.cssText = `--dial-percent:${temp}%`;
          storageEle.innerText = temp;
          temp = await getData("ram");
          ramEle.style.cssText = `--dial-percent:${temp}%`;
          ramEle.innerText = temp;
        })();
      }, 1000);
      
    </script>
  </body>
</html>
